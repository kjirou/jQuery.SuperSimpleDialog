!function(a){function b(b){this._message=b,this._buttons={},this._deferred=a.Deferred(),this.$el=null,this.$cover=null}void 0===a.ssdialog&&(a.ssdialog={VERSION:"0.0.1",getClass:function(){return b},create:function(a){return new b(a)},alert:function(){return this.createAlert.apply(this,arguments).open()},createAlert:function(c,d){var e=a.extend({okLabel:"OK"},d||{}),f=new b(c);return f.addButton("ok",e.okLabel),f.preRender(),f},confirm:function(){return this.createConfirm.apply(this,arguments).open()},createConfirm:function(c,d){var e=a.extend({okLabel:"OK",cancelLabel:"Cancel"},d||{}),f=new b(c);return f.addButton("cancel",e.cancelLabel),f.addButton("ok",e.okLabel),f.preRender(),f}},a.extend(b,{CSS_CLASS_NAME_PREFIX:"ssdialog",_isJQuery:function(b){return b instanceof a&&void 0!==b.jquery},_keys:function(a){var b,c=[];for(b in a)a.hasOwnProperty(b)&&c.push(b);return c},_createClassName:function(){var a=Array.prototype.slice.apply(arguments);return a.unshift(this.CSS_CLASS_NAME_PREFIX),a.join("-")},_escapeHTML:function(a){if(null===a)return"";var b={"<":"lt",">":"gt",'"':"quot","&":"amp","'":"apos"};return String(a).replace(/[&<>"']/g,function(a){return"&"+b[a]+";"})},_nl2br:function(a){return a.replace(/(?:\r\n|\n|\r)/g,'<br style="letter-spacing:0;" />')}}),a.extend(b.prototype,{addButton:function(a,b,c){void 0===c&&(c=this._createDefaultCallback()),this._buttons[a]={buttonId:a,label:b,callback:c,sortOrder:this._getButtonCount()}},_getButtonCount:function(){return b._keys(this._buttons).length},_createElements:function(){var c=a("<div>").addClass(b._createClassName()),d=a("<div>").addClass(b._createClassName("message")),e=a("<ul>").addClass(b._createClassName("buttons")).addClass(b._createClassName("buttons",this._getButtonCount())).addClass(b._createClassName("buttons","clearfix"));c.append(d).append(e);var f=a("<div>").addClass(b._createClassName("cover"));return[c,d,e,f]},_getButtonDataList:function(){var b=[];return a.each(this._buttons,function(a,c){b.push(c)}),b.sort(function(a,b){return a.sortOrder-b.sortOrder})},preRender:function(){var c=this._createElements(),d=c[0].hide(),e=c[1],f=c[2],g=c[3].hide(),h=this;b._isJQuery(this._message)?e.append(this._message):e.html(b._nl2br(b._escapeHTML(this._message))),a.each(this._buttons,function(c,d){f.append(a("<li>").addClass(b._createClassName("button")).addClass(b._createClassName("button",c)).text(d.label).on("mousedown",function(){h.triggerButtonEvent(c)}))}),a(document.body).append(g),a(document.body).append(d),this.$el=d,this.$cover=g},getPromise:function(){return this._deferred.promise()},open:function(){return this.$cover.show(),this.$el.show(),this.getPromise()},triggerButtonEvent:function(a){var b=this._buttons[a];b.callback({self:this,buttonData:b})},_createDefaultCallback:function(){return function(a){var b=a.self,c=a.buttonData;b.$cover.remove(),b.$el.remove(),b._deferred.resolve(c.buttonId)}}}))}(jQuery);